import { Callout } from "nextra-theme-docs";

# üß© `gamba-react-v2`

<div
  style={{
    display: "flex",
    alignItems: "center",
    gap: "12px",
    marginTop: "24px",
  }}
>
  <a
    href="https://www.npmjs.com/package/gamba-react-v2"
    target="_blank"
    rel="noopener noreferrer"
  >
    <img
      src="https://img.shields.io/npm/v/gamba-react-v2?color=blue&label=NPM&logo=npm"
      alt="NPM"
    />
  </a>
  <a
    href="https://github.com/gamba-labs/gamba/tree/main/packages/react"
    target="_blank"
    rel="noopener noreferrer"
  >
    <img
      src="https://img.shields.io/badge/GitHub-gamba--react--v2-blue?logo=github"
      alt="gamba-react-v2"
    />
  </a>
</div>

<Callout type="info" emoji="üß©">
  Gamba React package with essential hooks and context providers
</Callout>

```bash copy npm2yarn
npm install gamba-react-v2
```

## üîÑ **Contexts**

<Callout type="none" emoji="üîÑ">
### SendTransactionContext

- **Props**:
  - `priorityFee?: number`
  - `simulationUnits: number`
  - `computeUnitLimitMargin: number`

```jsx copy
import { SendTransactionProvider } from "gamba-react-v2";

// Wrap your app in SendTransactionProvider
function App() {
  return (
    <SendTransactionProvider
      priorityFee={10}
      simulationUnits={1000}
      computeUnitLimitMargin={200}
    >
      {/* Your application code */}
    </SendTransactionProvider>
  );
}
```

</Callout>

<Callout type="none" emoji="üîÑ">
### GambaContext

- **Props**:
  - `provider: GambaProvider`
  - `plugins: GambaPlugin[]`

```jsx copy
import { GambaProvider } from "gamba-react-v2";

// Wrap your app in GambaProvider
function App() {
  return (
    <GambaProvider provider={someProviderInstance} plugins={[plugin1, plugin2]}>
      {/* Your application code */}
    </GambaProvider>
  );
}
```

</Callout>

<Callout type="none" emoji="‚öôÔ∏è">
### SendTransactionProvider

- **Props**:
  - `children`
  - Additional props from `SendTransactionContext`.

```jsx copy
import { SendTransactionProvider } from "gamba-react-v2";

// Wrap your app or component in SendTransactionProvider
function App() {
  return (
    <SendTransactionProvider
      priorityFee={10}
      simulationUnits={1000}
      computeUnitLimitMargin={200}
    >
      {/* Your application code */}
    </SendTransactionProvider>
  );
}
```

</Callout>

<Callout type="none" emoji="‚öôÔ∏è">
### GambaProvider

- **Props**:
  - `__experimental_plugins?: GambaPlugin[]`
  - `children`

```jsx copy
import { GambaProvider } from 'gamba-react-v2;

// Wrap your app or component in GambaProvider
function App() {
  return (
    <GambaProvider provider={someProviderInstance} plugins={[plugin1, plugin2]}>
      {/* Your application code */}
    </GambaProvider>
  );
}
```

</Callout>

## üìú **Types**

<Callout type="none" emoji="üìú">
### GambaEventType

- **Type**: `'GameSettled' | 'PoolChange'`

```jsx copy
const eventType = "GameSettled";
```

</Callout>

<Callout type="none" emoji="üìú">
### GambaTransaction

- **Props**:
  - `signature: string`
  - `time: number`
  - `name: GambaEventType`
  - `data: GambaEvent<Event>['data']`

```jsx copy
const gambaTransaction = {
  signature: "example-signature",
  time: Date.now(),
  name: "GameSettled",
  data: {
    /* event data */
  },
};
```

</Callout>

<Callout type="none" emoji="üìú">
### GameResult

- **Props**:
  - `creator: PublicKey`
  - `user: PublicKey`
  - `rngSeed: string`
  - `payout: number`

```jsx copy
const gameResult = {
  creator: new PublicKey("example-creator"),
  user: new PublicKey("example-user"),
  rngSeed: "example-seed",
  payout: 1000,
};
```

</Callout>

<Callout type="none" emoji="üìú">
### GambaPlayInput

- **Props**:
  - `wager: number`
  - `bet: number[]`
  - `creator: string | PublicKey`
  - `creatorFee?: number`
  - `jackpotFee?: number`
  - `clientSeed?: string`
  - Other game input properties.

```jsx copy
const playInput = {
  wager: 100,
  bet: [1, 2, 3],
  creator: new PublicKey("example-creator"),
};
```

</Callout>

<Callout type="none" emoji="üìú">
### SendTransactionOptions

- **Props**:
  - `confirmation?: Commitment`
  - `lookupTable?: PublicKey[]`
  - `priorityFee?: number`
  - `computeUnitLimitMargin?: number`

```jsx copy
const options = {
  confirmation: "finalized",
  lookupTable: [new PublicKey("example-lookup")],
  priorityFee: 500,
};
```

</Callout>

<Callout type="none" emoji="üìú">
### SendTransactionProps

- **Props**:
  - Similar to `SendTransactionOptions`.

```jsx copy
const sendTransactionProps = {
  ...options,
  simulationUnits: 50000,
};
```

</Callout>

<Callout type="none" emoji="üìú">
### GambaProviderProps

- **Props**:
  - `__experimental_plugins?: GambaPlugin[]`

```jsx copy
const gambaProviderProps = {
  __experimental_plugins: [
    /* array of plugins */
  ],
};
```

</Callout>

<Callout type="none" emoji="üìú">
### TransactionStore

- **Props**:
  - `state: 'none' | 'simulating' | 'processing' | 'signing' | 'sending' | 'confirming' | 'error'`
  - `label?: string`
  - `signatureResult?: any`
  - `txId: string | undefined`

```jsx copy
const transactionStore = {
  state: "none",
  label: "Sample Transaction",
  signatureResult: {},
  txId: "sample-tx-id",
};
```

</Callout>

<Callout type="none" emoji="üìú">
### UseGambaEventsParams

- **Props**:
  - `address?: PublicKey`
  - `signatureLimit?: number`
  - `listen?: boolean`

```jsx copy
const gambaEventsParams = {
  address: new PublicKey("example-address"),
  signatureLimit: 10,
  listen: true,
};
```

</Callout>

<Callout type="none" emoji="üìú">
### UiPoolState

- **Props**:
  - `publicKey: PublicKey`
  - `token: PublicKey`
  - `liquidity: bigint`

```jsx copy
const poolState = {
  publicKey: new PublicKey("pool-address"),
  token: new PublicKey("token-address"),
  liquidity: BigInt(500000),
};
```

</Callout>

<Callout type="none" emoji="üìú">
### GambaPluginInput

- **Props**:
  - `wallet: PublicKey`
  - `creator: PublicKey`
  - `token: PublicKey`
  - `bet: number[]`
  - `wager: number`

```jsx copy
const pluginInput = {
  wallet: new PublicKey("wallet-address"),
  creator: new PublicKey("creator-address"),
  token: new PublicKey("token-address"),
  bet: [1, 2, 3],
  wager: 500,
};
```

</Callout>

## üîç **Methods and Hooks**

<Callout type="none" emoji="üîç">
### useAccount

- **Props**:
  - `address: PublicKey`
  - `decoder: (x: AccountInfo<Buffer> | null) => T`

```jsx copy
const accountData = useAccount(new PublicKey("account-address"), decodeAccount);
```

</Callout>

<Callout type="none" emoji="üîç">
### useWalletAddress

Returns the public key of the current wallet.

```jsx copy
const walletAddress = useWalletAddress();
```

</Callout>

<Callout type="none" emoji="üîç">
### useBalance

- **Props**:
  - `publicKey: PublicKey`
  - `token: PublicKey`

```jsx copy
const { balance, nativeBalance } = useBalance(
  new PublicKey("wallet-address"),
  new PublicKey("token-address")
);
```

</Callout>

<Callout type="none" emoji="üîç">
### useTransactionError

- **Props**:
  - `callback: (error: Error) => void`

```jsx copy
useTransactionError((error) => {
  console.error("Transaction Error:", error);
});
```

</Callout>

<Callout type="none" emoji="üîç">
### useSendTransaction

- **Props**:
  - `instructions: TransactionInstruction | Promise<TransactionInstruction>`

```jsx copy
const sendTransaction = useSendTransaction();
const txSignature = await sendTransaction([instruction]);
```

</Callout>

<Callout type="none" emoji="üîç">
### useGambaPlay

- **Props**:
  - `input: GambaPlayInput`
  - `instructions?: TransactionInstruction[]`

```jsx copy
const playGame = useGambaPlay();
const gameResult = await playGame(playInput, [instruction]);
```

</Callout>

<Callout type="none" emoji="üîç">
### useNextResult

Fetches the next game result.

```jsx copy
const getNextResult = useNextResult();
const nextResult = await getNextResult();
```

</Callout>

<Callout type="none" emoji="üîç">
### useGamba

Returns several functions, properties, and states.

```jsx copy
const { play, result, userCreated } = useGamba();
const resultData = await result();
```

</Callout>

<Callout type="none" emoji="üîç">
### useGambaEventListener

Adds an event listener for a specific Gamba event type.

```jsx copy
useGambaEventListener("GameSettled", (event) => {
  console.log("Game Settled:", event);
});
```

</Callout>

<Callout type="none" emoji="üîç">
### useGambaEvents

Fetches previous Gamba events.

```jsx copy
const gambaEvents = useGambaEvents("GameSettled", {
  address: new PublicKey("event-address"),
});
```

</Callout>

<Callout type="none" emoji="üîç">
### usePool

- **Props**:
  - `token: PublicKey`
  - `authority?: PublicKey`

```jsx copy
const poolData = usePool(
  new PublicKey("token-address"),
  new PublicKey("authority-address")
);
```

</Callout>

<Callout type="none" emoji="üîç">
### useTransactionStore

Manages the transaction store states.

```jsx copy
const transactionState = useTransactionStore();
```

</Callout>

<Callout type="none" emoji="üîç">
### useGambaProvider

Returns the current Gamba provider.

```jsx copy
const gambaProvider = useGambaProvider();
```

</Callout>

<Callout type="none" emoji="üîç">
### useGambaProgram

Returns the Anchor program for the Gamba IDL.

```jsx copy
const gambaProgram = useGambaProgram();
```

</Callout>

<Callout type="none" emoji="üîç">
### useGambaContext

Provides access to the Gamba context.

```jsx copy
const gambaContext = useGambaContext();
```

</Callout>

## ‚öôÔ∏è **Utilities and Functions**

<Callout type="none" emoji="‚öôÔ∏è">
### throwTransactionError

```jsx copy
try {
  // Simulate or execute transaction
} catch (error) {
  throwTransactionError(error);
}
```

</Callout>

<Callout type="none" emoji="‚öôÔ∏è">
### createCustomFeePlugin

```jsx copy
const feePlugin = createCustomFeePlugin("receiver-address", 5);
```

</Callout>
